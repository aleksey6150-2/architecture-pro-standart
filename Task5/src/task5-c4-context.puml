@startuml C4_Context_Credit_Process
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

LAYOUT_WITH_LEGEND()
LAYOUT_LEFT_RIGHT()

' === ПЕРСОНЫ ===
Person(new_client, "Новый клиент", "Пользователь сайта")
Person(existing_client, "Существующий клиент", "Пользователь интернет-банка")
Person(bo_manager, "Менеджер отделения", "Работает в АБС")
Person(credit_manager, "Сотрудник управления кредитования", "Работает в Кредитном конвейере")

' === КАНАЛЫ ===
System(site, "Сайт", "PHP/React.js")
System(internet_bank, "Интернет-банк", "ASP.NET MVC + BFF")

' === НОВЫЙ МИКРОСЕРВИС ===
System(credit_service, "Credit Application Service", "Java Spring Boot\nОбработка кредитных заявок")

' === СУЩЕСТВУЮЩИЕ СИСТЕМЫ ===
System(scoring, "Система кредитного скоринга", "Python/Flask, PostgreSQL\nML-модели")
System(conveyor, "Кредитный конвейер", "Camunda BPM, Oracle\nУправление процессами")
System(abs, "АБС", "Delphi/Oracle PL-SQL\nЯдро банка")
System(sms_service, "SMS Service", "Java/Python\nКорпоративный SMS-сервис")

' === ВНЕШНИЕ СИСТЕМЫ ===
System(bki, "Бюро кредитных историй", "Внешний REST API")

' === ИНТЕГРАЦИИ ===
Rel(new_client, site, "Подача заявки", "HTTPS")
Rel(existing_client, internet_bank, "Подача заявки", "HTTPS")

Rel(site, credit_service, "REST API", "HTTPS")
Rel(internet_bank, credit_service, "REST API", "HTTPS")

Rel(credit_service, scoring, "REST (синхронно)", "Получение скоринга")
Rel(scoring, bki, "REST", "Запрос кредитной истории")

Rel(credit_service, conveyor, "Асинхронно через очередь", "Отправка заявки")
Rel(credit_service, abs, "REST/JDBC", "Получение данных клиента")
Rel(credit_service, sms_service, "REST", "Отправка уведомлений")

Rel(bo_manager, abs, "Продолжение оформления", "Десктоп")
Rel(credit_manager, conveyor, "Обработка заявок", "UI Camunda")

SHOW_LEGEND()
@enduml